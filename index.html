<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <title>Intermediate British English Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      color: #003366;
      margin-bottom: 1rem;
    }
    .question {
      margin-bottom: 1.5rem;
    }
    .feedback {
      display: inline-block;
      margin-left: 10px;
      font-weight: bold;
    }
    .hint {
      font-size: 0.9rem;
      color: #666;
      margin-top: 4px;
    }
    .answer-key {
      margin-top: 6px;
      font-style: italic;
      color: #333;
    }
    .correct .feedback,
    .correct label {
      color: green;
    }
    .incorrect .feedback,
    .incorrect label {
      color: red;
    }
    select.correct {
      border: 2px solid green;
    }
    select.incorrect {
      border: 2px solid red;
    }
    button {
      display: block;
      margin: 2rem auto;
      padding: 0.6rem 1.2rem;
      background: #003366;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }
    button:hover {
      background: #002244;
    }
    #result {
      text-align: center;
      font-size: 1.25rem;
      margin-top: 1.5rem;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Intermediate British English Quiz</h1>
  <div id="quiz">
    <!-- Question 1 -->
    <div class="question" id="q1-wrap">
      <label for="q1">1. She ____ to the shops yesterday.</label>
      <select id="q1">
        <option value="">— select —</option>
        <option value="walked">walked</option>
        <option value="has walked">has walked</option>
        <option value="was walked">was walked</option>
        <option value="walk">walk</option>
      </select>
      <span class="feedback"></span>
      <div class="hint"></div>
    </div>

    <!-- Question 2 -->
    <div class="question" id="q2-wrap">
      <label for="q2">2. They ____ to the cinema last week.</label>
      <select id="q2">
        <option value="">— select —</option>
        <option value="went">went</option>
        <option value="have gone">have gone</option>
        <option value="gone">gone</option>
        <option value="go">go</option>
      </select>
      <span class="feedback"></span>
      <div class="hint"></div>
    </div>

    <!-- … replicate up to q25 … -->
  </div>

  <button onclick="submitQuiz()">Submit Answers</button>
  <div id="result"></div>

  <script>
    // 1) Answer key
    const answers = {
      q1:  "walked",
      q2:  "went",
      // … through q25 …
      q25: "have eaten"
    };

    // 2) Fisher–Yates shuffle helper
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // 3) On load: shuffle options & wire up inline hints
    document.addEventListener('DOMContentLoaded', () => {
      const total = Object.keys(answers).length;

      for (let i = 1; i <= total; i++) {
        const sel      = document.getElementById('q' + i);
        const opts     = Array.from(sel.querySelectorAll('option'));
        const place    = opts.shift();       // remove placeholder
        shuffle(opts);                        // shuffle real choices
        sel.innerHTML = '';                   // clear old options
        sel.appendChild(place);               // re-add placeholder
        opts.forEach(o => sel.appendChild(o));// add shuffled ones

        // wire inline-hint on change
        sel.addEventListener('change', () => {
          const hintDiv = sel.parentElement.querySelector('.hint');
          if (!sel.value) {
            hintDiv.textContent = '';
            return;
          }
          if (sel.value !== answers[sel.id]) {
            const first = answers[sel.id][0];
            hintDiv.textContent = `Hint: starts with “${first}”`;
          } else {
            hintDiv.textContent = '';
          }
        });
      }
    });

    // 4) Submission: score, first-pos %, reveal keys
    function submitQuiz() {
      let score         = 0;
      let firstPosCount = 0;
      const total       = Object.keys(answers).length;

      for (let i = 1; i <= total; i++) {
        const qid    = 'q' + i;
        const sel    = document.getElementById(qid);
        const wrap   = document.getElementById(qid + '-wrap');
        const fb     = wrap.querySelector('.feedback');

        wrap.classList.remove('correct','incorrect');
        fb.textContent = '';

        // mark correctness
        if (sel.value === answers[qid]) {
          wrap.classList.add('correct');
          fb.textContent = 'Correct!';
          score++;
        } else {
          wrap.classList.add('incorrect');
          fb.textContent = 'Incorrect';
        }

        // count first-position matches
        if (answers[qid] === sel.options[1]?.value) {
          firstPosCount++;
        }

        // reveal full answer key
        let ak = wrap.querySelector('.answer-key');
        if (!ak) {
          ak = document.createElement('div');
          ak.className = 'answer-key';
          wrap.appendChild(ak);
        }
        ak.textContent = `Answer: ${answers[qid]}`;

        sel.disabled = true;
      }

      const pct = ((firstPosCount / total) * 100).toFixed(1);
      document.getElementById('result').innerHTML =
        `You scored ${score} out of ${total}.<br>` +
        `${firstPosCount} correct ${firstPosCount === 1 ? 'answer' : 'answers'} ` +
        `(${pct}%) were the first choice.`;
    }
  </script>

</body>
</html>
